[
  {
    "within": [
      "FromModelica"
    ],
    "class_definition": [
      {
        "class_prefixes": "block",
        "class_specifier": {
          "long_class_specifier": {
            "name": "Modulation",
            "comment": "\"Outdoor and return air damper position modulation sequence for multi zone VAV AHU\"",
            "composition": {
              "element_list": {
                "element": [
                  {
                    "component_clause": {
                      "type_prefix": "parameter",
                      "type_specifier": "Real",
                      "component_list": {
                        "component_declaration": [
                          {
                            "declaration": {
                              "name": "uMin",
                              "class_modification": {
                                "modifications": [
                                  {
                                    "prefix": "final",
                                    "name": "max",
                                    "value": "0"
                                  },
                                  {
                                    "prefix": "final",
                                    "name": "unit",
                                    "value": "\"1\""
                                  }
                                ]
                              },
                              "value": "-0.25"
                            },
                            "comment": {
                              "string_comment": "\"Lower limit of controller input when outdoor damper opens (see diagram)\"",
                              "annotation": {
                                "dialog": [
                                  {
                                    "name": "tab",
                                    "value": "\"Commissioning\""
                                  },
                                  {
                                    "name": "group",
                                    "value": "\"Controller\""
                                  }
                                ],
                                "others": [
                                  {
                                    "name": "Evaluate",
                                    "value": "true"
                                  }
                                ]
                              }
                            }
                          }
                        ]
                      }
                    }
                  },
                  {
                    "component_clause": {
                      "type_prefix": "parameter",
                      "type_specifier": "Real",
                      "component_list": {
                        "component_declaration": [
                          {
                            "declaration": {
                              "name": "uMax",
                              "class_modification": {
                                "modifications": [
                                  {
                                    "prefix": "final",
                                    "name": "min",
                                    "value": "0"
                                  },
                                  {
                                    "prefix": "final",
                                    "name": "unit",
                                    "value": "\"1\""
                                  }
                                ]
                              },
                              "value": "+0.25"
                            },
                            "comment": {
                              "string_comment": "\"Upper limit of controller input when return damper is closed (see diagram)\"",
                              "annotation": {
                                "dialog": [
                                  {
                                    "name": "tab",
                                    "value": "\"Commissioning\""
                                  },
                                  {
                                    "name": "group",
                                    "value": "\"Controller\""
                                  }
                                ],
                                "others": [
                                  {
                                    "name": "Evaluate",
                                    "value": "true"
                                  }
                                ]
                              }
                            }
                          }
                        ]
                      }
                    }
                  },
                  {
                    "component_clause": {
                      "type_prefix": "parameter",
                      "type_specifier": "Real",
                      "component_list": {
                        "component_declaration": [
                          {
                            "declaration": {
                              "name": "uOutDamMax",
                              "class_modification": {
                                "modifications": [
                                  {
                                    "prefix": "final",
                                    "name": "min",
                                    "value": "-1"
                                  },
                                  {
                                    "prefix": "final",
                                    "name": "max",
                                    "value": "1"
                                  },
                                  {
                                    "prefix": "final",
                                    "name": "unit",
                                    "value": "\"1\""
                                  }
                                ]
                              },
                              "value": "(uMin + uMax)/2"
                            },
                            "comment": {
                              "string_comment": "\"Maximum loop signal for the OA damper to be fully open\"",
                              "annotation": {
                                "dialog": [
                                  {
                                    "name": "tab",
                                    "value": "\"Commissioning\""
                                  },
                                  {
                                    "name": "group",
                                    "value": "\"Controller\""
                                  }
                                ],
                                "others": [
                                  {
                                    "name": "Evaluate",
                                    "value": "true"
                                  }
                                ]
                              }
                            }
                          }
                        ]
                      }
                    }
                  },
                  {
                    "component_clause": {
                      "type_prefix": "parameter",
                      "type_specifier": "Real",
                      "component_list": {
                        "component_declaration": [
                          {
                            "declaration": {
                              "name": "uRetDamMin",
                              "class_modification": {
                                "modifications": [
                                  {
                                    "prefix": "final",
                                    "name": "min",
                                    "value": "-1"
                                  },
                                  {
                                    "prefix": "final",
                                    "name": "max",
                                    "value": "1"
                                  },
                                  {
                                    "prefix": "final",
                                    "name": "unit",
                                    "value": "\"1\""
                                  }
                                ]
                              },
                              "value": "(uMin + uMax)/2"
                            },
                            "comment": {
                              "string_comment": "\"Minimum loop signal for the RA damper to be fully open\"",
                              "annotation": {
                                "dialog": [
                                  {
                                    "name": "tab",
                                    "value": "\"Commissioning\""
                                  },
                                  {
                                    "name": "group",
                                    "value": "\"Controller\""
                                  }
                                ],
                                "others": [
                                  {
                                    "name": "Evaluate",
                                    "value": "true"
                                  }
                                ]
                              }
                            }
                          }
                        ]
                      }
                    }
                  },
                  {
                    "component_clause": {
                      "type_prefix": "parameter",
                      "type_specifier": "Modelica.SIunits.Time",
                      "component_list": {
                        "component_declaration": [
                          {
                            "declaration": {
                              "name": "samplePeriod",
                              "value": "300"
                            },
                            "comment": {
                              "string_comment": "\"Sample period of component, used to limit the rate of change of the dampers (to avoid quick opening that can result in frost)\""
                            }
                          }
                        ]
                      }
                    }
                  },
                  {
                    "component_clause": {
                      "type_specifier": "Buildings.Controls.OBC.CDL.Interfaces.RealInput",
                      "component_list": {
                        "component_declaration": [
                          {
                            "declaration": {
                              "name": "uTSup",
                              "class_modification": {
                                "modifications": [
                                  {
                                    "prefix": "final",
                                    "name": "unit",
                                    "value": "\"1\""
                                  }
                                ]
                              }
                            },
                            "comment": {
                              "string_comment": "\"Signal for supply air temperature control (T Sup Control Loop Signal in diagram)\"",
                              "annotation": {
                                "placement": {
                                  "transformation": {
                                    "extent": [
                                      {
                                        "x": -160,
                                        "y": -20
                                      },
                                      {
                                        "x": -120,
                                        "y": 20
                                      }
                                    ]
                                  },
                                  "iconTransformation": {
                                    "extent": [
                                      {
                                        "x": -120,
                                        "y": -10
                                      },
                                      {
                                        "x": -100,
                                        "y": 10
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        ]
                      }
                    }
                  },
                  {
                    "component_clause": {
                      "type_specifier": "Buildings.Controls.OBC.CDL.Interfaces.RealInput",
                      "component_list": {
                        "component_declaration": [
                          {
                            "declaration": {
                              "name": "uOutDamPosMin",
                              "class_modification": {
                                "modifications": [
                                  {
                                    "prefix": "final",
                                    "name": "min",
                                    "value": "0"
                                  },
                                  {
                                    "prefix": "final",
                                    "name": "max",
                                    "value": "1"
                                  },
                                  {
                                    "prefix": "final",
                                    "name": "unit",
                                    "value": "\"1\""
                                  }
                                ]
                              }
                            },
                            "comment": {
                              "string_comment": "\"Minimum economizer damper position limit as returned by the damper position limits  sequence\"",
                              "annotation": {
                                "placement": {
                                  "transformation": {
                                    "extent": [
                                      {
                                        "x": -160,
                                        "y": -120
                                      },
                                      {
                                        "x": -120,
                                        "y": -80
                                      }
                                    ]
                                  },
                                  "iconTransformation": {
                                    "extent": [
                                      {
                                        "x": -120,
                                        "y": -90
                                      },
                                      {
                                        "x": -100,
                                        "y": -70
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        ]
                      }
                    }
                  },
                  {
                    "component_clause": {
                      "type_specifier": "Buildings.Controls.OBC.CDL.Interfaces.RealInput",
                      "component_list": {
                        "component_declaration": [
                          {
                            "declaration": {
                              "name": "uOutDamPosMax",
                              "class_modification": {
                                "modifications": [
                                  {
                                    "prefix": "final",
                                    "name": "min",
                                    "value": "0"
                                  },
                                  {
                                    "prefix": "final",
                                    "name": "max",
                                    "value": "1"
                                  },
                                  {
                                    "prefix": "final",
                                    "name": "unit",
                                    "value": "\"1\""
                                  }
                                ]
                              }
                            },
                            "comment": {
                              "string_comment": "\"Maximum economizer damper position limit as returned by the economizer enable-disable sequence.\n    If the economizer is disabled, this value equals uOutDamPosMin\"",
                              "annotation": {
                                "placement": {
                                  "transformation": {
                                    "extent": [
                                      {
                                        "x": -160,
                                        "y": -70
                                      },
                                      {
                                        "x": -120,
                                        "y": -30
                                      }
                                    ]
                                  },
                                  "iconTransformation": {
                                    "extent": [
                                      {
                                        "x": -120,
                                        "y": -50
                                      },
                                      {
                                        "x": -100,
                                        "y": -30
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        ]
                      }
                    }
                  },
                  {
                    "component_clause": {
                      "type_specifier": "Buildings.Controls.OBC.CDL.Interfaces.RealInput",
                      "component_list": {
                        "component_declaration": [
                          {
                            "declaration": {
                              "name": "uRetDamPosMin",
                              "class_modification": {
                                "modifications": [
                                  {
                                    "prefix": "final",
                                    "name": "min",
                                    "value": "0"
                                  },
                                  {
                                    "prefix": "final",
                                    "name": "max",
                                    "value": "1"
                                  },
                                  {
                                    "prefix": "final",
                                    "name": "unit",
                                    "value": "\"1\""
                                  }
                                ]
                              }
                            },
                            "comment": {
                              "string_comment": "\"Minimum return air damper position limit as returned by the economizer enable-disable sequence\"",
                              "annotation": {
                                "placement": {
                                  "transformation": {
                                    "extent": [
                                      {
                                        "x": -160,
                                        "y": 30
                                      },
                                      {
                                        "x": -120,
                                        "y": 70
                                      }
                                    ]
                                  },
                                  "iconTransformation": {
                                    "extent": [
                                      {
                                        "x": -120,
                                        "y": 30
                                      },
                                      {
                                        "x": -100,
                                        "y": 50
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        ]
                      }
                    }
                  },
                  {
                    "component_clause": {
                      "type_specifier": "Buildings.Controls.OBC.CDL.Interfaces.RealInput",
                      "component_list": {
                        "component_declaration": [
                          {
                            "declaration": {
                              "name": "uRetDamPosMax",
                              "class_modification": {
                                "modifications": [
                                  {
                                    "prefix": "final",
                                    "name": "min",
                                    "value": "0"
                                  },
                                  {
                                    "prefix": "final",
                                    "name": "max",
                                    "value": "1"
                                  },
                                  {
                                    "prefix": "final",
                                    "name": "unit",
                                    "value": "\"1\""
                                  }
                                ]
                              }
                            },
                            "comment": {
                              "string_comment": "\"Maximum return air damper position limit as returned by the economizer enable-disable sequence\"",
                              "annotation": {
                                "placement": {
                                  "transformation": {
                                    "extent": [
                                      {
                                        "x": -160,
                                        "y": 80
                                      },
                                      {
                                        "x": -120,
                                        "y": 120
                                      }
                                    ]
                                  },
                                  "iconTransformation": {
                                    "extent": [
                                      {
                                        "x": -120,
                                        "y": 70
                                      },
                                      {
                                        "x": -100,
                                        "y": 90
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        ]
                      }
                    }
                  },
                  {
                    "component_clause": {
                      "type_specifier": "Buildings.Controls.OBC.CDL.Interfaces.RealOutput",
                      "component_list": {
                        "component_declaration": [
                          {
                            "declaration": {
                              "name": "yOutDamPos",
                              "class_modification": {
                                "modifications": [
                                  {
                                    "prefix": "final",
                                    "name": "min",
                                    "value": "0"
                                  },
                                  {
                                    "prefix": "final",
                                    "name": "max",
                                    "value": "1"
                                  },
                                  {
                                    "prefix": "final",
                                    "name": "unit",
                                    "value": "\"1\""
                                  }
                                ]
                              }
                            },
                            "comment": {
                              "string_comment": "\"Economizer damper position\"",
                              "annotation": {
                                "placement": {
                                  "transformation": {
                                    "extent": [
                                      {
                                        "x": 120,
                                        "y": -70
                                      },
                                      {
                                        "x": 140,
                                        "y": -50
                                      }
                                    ]
                                  },
                                  "iconTransformation": {
                                    "extent": [
                                      {
                                        "x": 100,
                                        "y": -30
                                      },
                                      {
                                        "x": 120,
                                        "y": -10
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        ]
                      }
                    }
                  },
                  {
                    "component_clause": {
                      "type_specifier": "Buildings.Controls.OBC.CDL.Interfaces.RealOutput",
                      "component_list": {
                        "component_declaration": [
                          {
                            "declaration": {
                              "name": "yRetDamPos",
                              "class_modification": {
                                "modifications": [
                                  {
                                    "prefix": "final",
                                    "name": "min",
                                    "value": "0"
                                  },
                                  {
                                    "prefix": "final",
                                    "name": "max",
                                    "value": "1"
                                  },
                                  {
                                    "prefix": "final",
                                    "name": "unit",
                                    "value": "\"1\""
                                  }
                                ]
                              }
                            },
                            "comment": {
                              "string_comment": "\"Return air damper position\"",
                              "annotation": {
                                "placement": {
                                  "transformation": {
                                    "extent": [
                                      {
                                        "x": 120,
                                        "y": 50
                                      },
                                      {
                                        "x": 140,
                                        "y": 70
                                      }
                                    ]
                                  },
                                  "iconTransformation": {
                                    "extent": [
                                      {
                                        "x": 100,
                                        "y": 10
                                      },
                                      {
                                        "x": 120,
                                        "y": 30
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        ]
                      }
                    }
                  }
                ]
              },
              "prefix_protect": [
                "protected"
              ],
              "prefixed_element": [
                {
                  "element": [
                    {
                      "component_clause": {
                        "type_specifier": "Buildings.Controls.OBC.CDL.Continuous.Sources.Constant",
                        "component_list": {
                          "component_declaration": [
                            {
                              "declaration": {
                                "name": "outDamMinLimSig",
                                "class_modification": {
                                  "modifications": [
                                    {
                                      "prefix": "final",
                                      "name": "k",
                                      "value": "uMin"
                                    }
                                  ]
                                }
                              },
                              "comment": {
                                "string_comment": "\"Minimal control loop signal for the outdoor air damper\"",
                                "annotation": {
                                  "placement": {
                                    "transformation": {
                                      "extent": [
                                        {
                                          "x": -60,
                                          "y": -32
                                        },
                                        {
                                          "x": -40,
                                          "y": -12
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          ]
                        }
                      }
                    },
                    {
                      "component_clause": {
                        "type_specifier": "Buildings.Controls.OBC.CDL.Continuous.Sources.Constant",
                        "component_list": {
                          "component_declaration": [
                            {
                              "declaration": {
                                "name": "outDamMaxLimSig",
                                "class_modification": {
                                  "modifications": [
                                    {
                                      "prefix": "final",
                                      "name": "k",
                                      "value": "uOutDamMax"
                                    }
                                  ]
                                }
                              },
                              "comment": {
                                "string_comment": "\"Maximum control loop signal for the outdoor air damper\"",
                                "annotation": {
                                  "placement": {
                                    "transformation": {
                                      "extent": [
                                        {
                                          "x": -100,
                                          "y": -60
                                        },
                                        {
                                          "x": -80,
                                          "y": -40
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          ]
                        }
                      }
                    },
                    {
                      "component_clause": {
                        "type_specifier": "Buildings.Controls.OBC.CDL.Continuous.Sources.Constant",
                        "component_list": {
                          "component_declaration": [
                            {
                              "declaration": {
                                "name": "retDamConMinLimSig",
                                "class_modification": {
                                  "modifications": [
                                    {
                                      "prefix": "final",
                                      "name": "k",
                                      "value": "uRetDamMin"
                                    }
                                  ]
                                }
                              },
                              "comment": {
                                "string_comment": "\"Minimal control loop signal for the return air damper\"",
                                "annotation": {
                                  "placement": {
                                    "transformation": {
                                      "extent": [
                                        {
                                          "x": -80,
                                          "y": 68
                                        },
                                        {
                                          "x": -60,
                                          "y": 88
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          ]
                        }
                      }
                    },
                    {
                      "component_clause": {
                        "type_specifier": "Buildings.Controls.OBC.CDL.Continuous.Sources.Constant",
                        "component_list": {
                          "component_declaration": [
                            {
                              "declaration": {
                                "name": "retDamMaxLimSig",
                                "class_modification": {
                                  "modifications": [
                                    {
                                      "prefix": "final",
                                      "name": "k",
                                      "value": "uMax"
                                    }
                                  ]
                                }
                              },
                              "comment": {
                                "string_comment": "\"Maximal control loop signal for the return air damper\"",
                                "annotation": {
                                  "placement": {
                                    "transformation": {
                                      "extent": [
                                        {
                                          "x": -60,
                                          "y": 10
                                        },
                                        {
                                          "x": -40,
                                          "y": 30
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          ]
                        }
                      }
                    },
                    {
                      "component_clause": {
                        "type_specifier": "Buildings.Controls.OBC.CDL.Continuous.Line",
                        "component_list": {
                          "component_declaration": [
                            {
                              "declaration": {
                                "name": "outDamPos",
                                "class_modification": {
                                  "modifications": [
                                    {
                                      "prefix": "final",
                                      "name": "limitBelow",
                                      "value": "true"
                                    },
                                    {
                                      "prefix": "final",
                                      "name": "limitAbove",
                                      "value": "true"
                                    }
                                  ]
                                }
                              },
                              "comment": {
                                "string_comment": "\"Damper position is linearly proportional to the control signal between signal limits\"",
                                "annotation": {
                                  "placement": {
                                    "transformation": {
                                      "extent": [
                                        {
                                          "x": 0,
                                          "y": -40
                                        },
                                        {
                                          "x": 20,
                                          "y": -20
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          ]
                        }
                      }
                    },
                    {
                      "component_clause": {
                        "type_specifier": "Buildings.Controls.OBC.CDL.Continuous.Line",
                        "component_list": {
                          "component_declaration": [
                            {
                              "declaration": {
                                "name": "retDamPos",
                                "class_modification": {
                                  "modifications": [
                                    {
                                      "prefix": "final",
                                      "name": "limitBelow",
                                      "value": "true"
                                    },
                                    {
                                      "prefix": "final",
                                      "name": "limitAbove",
                                      "value": "true"
                                    }
                                  ]
                                }
                              },
                              "comment": {
                                "string_comment": "\"Damper position is linearly proportional to the control signal between signal limits\"",
                                "annotation": {
                                  "placement": {
                                    "transformation": {
                                      "extent": [
                                        {
                                          "x": 0,
                                          "y": 60
                                        },
                                        {
                                          "x": 20,
                                          "y": 80
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          ]
                        }
                      }
                    },
                    {
                      "component_clause": {
                        "type_specifier": "Buildings.Controls.OBC.CDL.Continuous.Min",
                        "component_list": {
                          "component_declaration": [
                            {
                              "declaration": {
                                "name": "min"
                              },
                              "comment": {
                                "string_comment": "\"Overwrite due to freeze protection\"",
                                "annotation": {
                                  "placement": {
                                    "transformation": {
                                      "extent": [
                                        {
                                          "x": 60,
                                          "y": -70
                                        },
                                        {
                                          "x": 80,
                                          "y": -50
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          ]
                        }
                      }
                    },
                    {
                      "component_clause": {
                        "type_specifier": "Buildings.Controls.OBC.CDL.Continuous.Max",
                        "component_list": {
                          "component_declaration": [
                            {
                              "declaration": {
                                "name": "max"
                              },
                              "comment": {
                                "string_comment": "\"Overwrite due to freeze protection\"",
                                "annotation": {
                                  "placement": {
                                    "transformation": {
                                      "extent": [
                                        {
                                          "x": 60,
                                          "y": 50
                                        },
                                        {
                                          "x": 80,
                                          "y": 70
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          ]
                        }
                      }
                    },
                    {
                      "component_clause": {
                        "type_specifier": "Buildings.Controls.OBC.CDL.Discrete.FirstOrderHold",
                        "component_list": {
                          "component_declaration": [
                            {
                              "declaration": {
                                "name": "firOrdHolOutDam",
                                "class_modification": {
                                  "modifications": [
                                    {
                                      "prefix": "final",
                                      "name": "samplePeriod",
                                      "value": "samplePeriod"
                                    }
                                  ]
                                }
                              },
                              "comment": {
                                "string_comment": "\"First order hold to avoid too fast opening/closing of damper (which may cause freeze protection to be too slow to compensate)\"",
                                "annotation": {
                                  "placement": {
                                    "transformation": {
                                      "extent": [
                                        {
                                          "x": 92,
                                          "y": -70
                                        },
                                        {
                                          "x": 112,
                                          "y": -50
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          ]
                        }
                      }
                    },
                    {
                      "component_clause": {
                        "type_specifier": "Buildings.Controls.OBC.CDL.Discrete.FirstOrderHold",
                        "component_list": {
                          "component_declaration": [
                            {
                              "declaration": {
                                "name": "firOrdHolRetDam",
                                "class_modification": {
                                  "modifications": [
                                    {
                                      "prefix": "final",
                                      "name": "samplePeriod",
                                      "value": "samplePeriod"
                                    }
                                  ]
                                }
                              },
                              "comment": {
                                "string_comment": "\"First order hold to avoid too fast opening/closing of damper (which may cause freeze protection to be too slow to compensate)\"",
                                "annotation": {
                                  "placement": {
                                    "transformation": {
                                      "extent": [
                                        {
                                          "x": 90,
                                          "y": 50
                                        },
                                        {
                                          "x": 110,
                                          "y": 70
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            }
                          ]
                        }
                      }
                    }
                  ]
                }
              ],
              "equation_section": [
                {
                  "prefix": "equation",
                  "equation": [
                    {
                      "connect_clause": {
                        "component1": [
                          "outDamPos",
                          "x2"
                        ],
                        "component2": [
                          "outDamMaxLimSig",
                          "y"
                        ]
                      },
                      "comment": {
                        "annotation": {
                          "line": {
                            "points": [
                              {
                                "x": -2,
                                "y": -34
                              },
                              {
                                "x": -30,
                                "y": -34
                              },
                              {
                                "x": -30,
                                "y": -50
                              },
                              {
                                "x": -79,
                                "y": -50
                              }
                            ],
                            "color": {
                              "r": 0,
                              "g": 0,
                              "b": 127
                            }
                          }
                        }
                      }
                    },
                    {
                      "connect_clause": {
                        "component1": [
                          "outDamPos",
                          "x1"
                        ],
                        "component2": [
                          "outDamMinLimSig",
                          "y"
                        ]
                      },
                      "comment": {
                        "annotation": {
                          "line": {
                            "points": [
                              {
                                "x": -2,
                                "y": -22
                              },
                              {
                                "x": -39,
                                "y": -22
                              }
                            ],
                            "color": {
                              "r": 0,
                              "g": 0,
                              "b": 127
                            }
                          }
                        }
                      }
                    },
                    {
                      "connect_clause": {
                        "component1": [
                          "outDamPos",
                          "f1"
                        ],
                        "component2": [
                          "uOutDamPosMin"
                        ]
                      },
                      "comment": {
                        "annotation": {
                          "line": {
                            "points": [
                              {
                                "x": -2,
                                "y": -26
                              },
                              {
                                "x": -24,
                                "y": -26
                              },
                              {
                                "x": -24,
                                "y": -100
                              },
                              {
                                "x": -140,
                                "y": -100
                              }
                            ],
                            "color": {
                              "r": 0,
                              "g": 0,
                              "b": 127
                            }
                          }
                        }
                      }
                    },
                    {
                      "connect_clause": {
                        "component1": [
                          "outDamPos",
                          "f2"
                        ],
                        "component2": [
                          "uOutDamPosMax"
                        ]
                      },
                      "comment": {
                        "annotation": {
                          "line": {
                            "points": [
                              {
                                "x": -2,
                                "y": -38
                              },
                              {
                                "x": -20,
                                "y": -38
                              },
                              {
                                "x": -20,
                                "y": -66
                              },
                              {
                                "x": -108,
                                "y": -66
                              },
                              {
                                "x": -108,
                                "y": -50
                              },
                              {
                                "x": -140,
                                "y": -50
                              }
                            ],
                            "color": {
                              "r": 0,
                              "g": 0,
                              "b": 127
                            }
                          }
                        }
                      }
                    },
                    {
                      "connect_clause": {
                        "component1": [
                          "retDamPos",
                          "x2"
                        ],
                        "component2": [
                          "retDamMaxLimSig",
                          "y"
                        ]
                      },
                      "comment": {
                        "annotation": {
                          "line": {
                            "points": [
                              {
                                "x": -2,
                                "y": 66
                              },
                              {
                                "x": -28,
                                "y": 66
                              },
                              {
                                "x": -28,
                                "y": 20
                              },
                              {
                                "x": -39,
                                "y": 20
                              }
                            ],
                            "color": {
                              "r": 0,
                              "g": 0,
                              "b": 127
                            }
                          }
                        }
                      }
                    },
                    {
                      "connect_clause": {
                        "component1": [
                          "retDamPos",
                          "x1"
                        ],
                        "component2": [
                          "retDamConMinLimSig",
                          "y"
                        ]
                      },
                      "comment": {
                        "annotation": {
                          "line": {
                            "points": [
                              {
                                "x": -2,
                                "y": 78
                              },
                              {
                                "x": -59,
                                "y": 78
                              }
                            ],
                            "color": {
                              "r": 0,
                              "g": 0,
                              "b": 127
                            }
                          }
                        }
                      }
                    },
                    {
                      "connect_clause": {
                        "component1": [
                          "retDamPos",
                          "f1"
                        ],
                        "component2": [
                          "uRetDamPosMax"
                        ]
                      },
                      "comment": {
                        "annotation": {
                          "line": {
                            "points": [
                              {
                                "x": -2,
                                "y": 74
                              },
                              {
                                "x": -48,
                                "y": 74
                              },
                              {
                                "x": -48,
                                "y": 100
                              },
                              {
                                "x": -140,
                                "y": 100
                              }
                            ],
                            "color": {
                              "r": 0,
                              "g": 0,
                              "b": 127
                            }
                          }
                        }
                      }
                    },
                    {
                      "connect_clause": {
                        "component1": [
                          "retDamPos",
                          "f2"
                        ],
                        "component2": [
                          "uRetDamPosMin"
                        ]
                      },
                      "comment": {
                        "annotation": {
                          "line": {
                            "points": [
                              {
                                "x": -2,
                                "y": 62
                              },
                              {
                                "x": -12,
                                "y": 62
                              },
                              {
                                "x": -12,
                                "y": 50
                              },
                              {
                                "x": -140,
                                "y": 50
                              }
                            ],
                            "color": {
                              "r": 0,
                              "g": 0,
                              "b": 127
                            }
                          }
                        }
                      }
                    },
                    {
                      "connect_clause": {
                        "component1": [
                          "min",
                          "u2"
                        ],
                        "component2": [
                          "uOutDamPosMax"
                        ]
                      },
                      "comment": {
                        "annotation": {
                          "line": {
                            "points": [
                              {
                                "x": 58,
                                "y": -66
                              },
                              {
                                "x": -108,
                                "y": -66
                              },
                              {
                                "x": -108,
                                "y": -50
                              },
                              {
                                "x": -140,
                                "y": -50
                              }
                            ],
                            "color": {
                              "r": 0,
                              "g": 0,
                              "b": 127
                            }
                          }
                        }
                      }
                    },
                    {
                      "connect_clause": {
                        "component1": [
                          "min",
                          "u1"
                        ],
                        "component2": [
                          "outDamPos",
                          "y"
                        ]
                      },
                      "comment": {
                        "annotation": {
                          "line": {
                            "points": [
                              {
                                "x": 58,
                                "y": -54
                              },
                              {
                                "x": 28,
                                "y": -54
                              },
                              {
                                "x": 28,
                                "y": -30
                              },
                              {
                                "x": 21,
                                "y": -30
                              }
                            ],
                            "color": {
                              "r": 0,
                              "g": 0,
                              "b": 127
                            }
                          }
                        }
                      }
                    },
                    {
                      "connect_clause": {
                        "component1": [
                          "max",
                          "u1"
                        ],
                        "component2": [
                          "retDamPos",
                          "y"
                        ]
                      },
                      "comment": {
                        "annotation": {
                          "line": {
                            "points": [
                              {
                                "x": 58,
                                "y": 66
                              },
                              {
                                "x": 30,
                                "y": 66
                              },
                              {
                                "x": 30,
                                "y": 70
                              },
                              {
                                "x": 21,
                                "y": 70
                              }
                            ],
                            "color": {
                              "r": 0,
                              "g": 0,
                              "b": 127
                            }
                          }
                        }
                      }
                    },
                    {
                      "connect_clause": {
                        "component1": [
                          "uRetDamPosMin"
                        ],
                        "component2": [
                          "max",
                          "u2"
                        ]
                      },
                      "comment": {
                        "annotation": {
                          "line": {
                            "points": [
                              {
                                "x": -140,
                                "y": 50
                              },
                              {
                                "x": -12,
                                "y": 50
                              },
                              {
                                "x": -12,
                                "y": 54
                              },
                              {
                                "x": 58,
                                "y": 54
                              }
                            ],
                            "color": {
                              "r": 0,
                              "g": 0,
                              "b": 127
                            }
                          }
                        }
                      }
                    },
                    {
                      "connect_clause": {
                        "component1": [
                          "min",
                          "y"
                        ],
                        "component2": [
                          "firOrdHolOutDam",
                          "u"
                        ]
                      },
                      "comment": {
                        "annotation": {
                          "line": {
                            "points": [
                              {
                                "x": 81,
                                "y": -60
                              },
                              {
                                "x": 90,
                                "y": -60
                              }
                            ],
                            "color": {
                              "r": 0,
                              "g": 0,
                              "b": 127
                            }
                          }
                        }
                      }
                    },
                    {
                      "connect_clause": {
                        "component1": [
                          "firOrdHolOutDam",
                          "y"
                        ],
                        "component2": [
                          "yOutDamPos"
                        ]
                      },
                      "comment": {
                        "annotation": {
                          "line": {
                            "points": [
                              {
                                "x": 113,
                                "y": -60
                              },
                              {
                                "x": 130,
                                "y": -60
                              }
                            ],
                            "color": {
                              "r": 0,
                              "g": 0,
                              "b": 127
                            }
                          }
                        }
                      }
                    },
                    {
                      "connect_clause": {
                        "component1": [
                          "uTSup"
                        ],
                        "component2": [
                          "retDamPos",
                          "u"
                        ]
                      },
                      "comment": {
                        "annotation": {
                          "line": {
                            "points": [
                              {
                                "x": -140,
                                "y": 0
                              },
                              {
                                "x": -22,
                                "y": 0
                              },
                              {
                                "x": -22,
                                "y": 70
                              },
                              {
                                "x": -2,
                                "y": 70
                              }
                            ],
                            "color": {
                              "r": 0,
                              "g": 0,
                              "b": 127
                            }
                          }
                        }
                      }
                    },
                    {
                      "connect_clause": {
                        "component1": [
                          "uTSup"
                        ],
                        "component2": [
                          "outDamPos",
                          "u"
                        ]
                      },
                      "comment": {
                        "annotation": {
                          "line": {
                            "points": [
                              {
                                "x": -140,
                                "y": 0
                              },
                              {
                                "x": -22,
                                "y": 0
                              },
                              {
                                "x": -22,
                                "y": -30
                              },
                              {
                                "x": -2,
                                "y": -30
                              }
                            ],
                            "color": {
                              "r": 0,
                              "g": 0,
                              "b": 127
                            }
                          }
                        }
                      }
                    },
                    {
                      "connect_clause": {
                        "component1": [
                          "max",
                          "y"
                        ],
                        "component2": [
                          "firOrdHolRetDam",
                          "u"
                        ]
                      },
                      "comment": {
                        "annotation": {
                          "line": {
                            "points": [
                              {
                                "x": 81,
                                "y": 60
                              },
                              {
                                "x": 88,
                                "y": 60
                              }
                            ],
                            "color": {
                              "r": 0,
                              "g": 0,
                              "b": 127
                            }
                          }
                        }
                      }
                    },
                    {
                      "connect_clause": {
                        "component1": [
                          "firOrdHolRetDam",
                          "y"
                        ],
                        "component2": [
                          "yRetDamPos"
                        ]
                      },
                      "comment": {
                        "annotation": {
                          "line": {
                            "points": [
                              {
                                "x": 111,
                                "y": 60
                              },
                              {
                                "x": 130,
                                "y": 60
                              }
                            ],
                            "color": {
                              "r": 0,
                              "g": 0,
                              "b": 127
                            }
                          }
                        }
                      }
                    }
                  ]
                }
              ],
              "comp_annotation": {
                "defaultName": "\"mod\"",
                "diagram": {
                  "coordinateSystem": {
                    "extent": [
                      {
                        "x": -120,
                        "y": -120
                      },
                      {
                        "x": 120,
                        "y": 120
                      }
                    ],
                    "preserveAspectRatio": false
                  },
                  "graphics": {
                    "rectangle": [
                      {
                        "lineColor": {
                          "r": 0,
                          "g": 0,
                          "b": 0
                        },
                        "fillColor": {
                          "r": 215,
                          "g": 215,
                          "b": 215
                        },
                        "fillPattern": "FillPattern.Solid",
                        "extent": [
                          {
                            "x": -26,
                            "y": 118
                          },
                          {
                            "x": 46,
                            "y": -118
                          }
                        ]
                      },
                      {
                        "lineColor": {
                          "r": 0,
                          "g": 0,
                          "b": 0
                        },
                        "fillColor": {
                          "r": 215,
                          "g": 215,
                          "b": 215
                        },
                        "fillPattern": "FillPattern.Solid",
                        "extent": [
                          {
                            "x": -118,
                            "y": 118
                          },
                          {
                            "x": -34,
                            "y": -118
                          }
                        ]
                      },
                      {
                        "lineColor": {
                          "r": 0,
                          "g": 0,
                          "b": 0
                        },
                        "fillColor": {
                          "r": 215,
                          "g": 215,
                          "b": 215
                        },
                        "fillPattern": "FillPattern.Solid",
                        "extent": [
                          {
                            "x": 52,
                            "y": 118
                          },
                          {
                            "x": 118,
                            "y": -118
                          }
                        ]
                      }
                    ],
                    "text": [
                      {
                        "lineColor": {
                          "r": 0,
                          "g": 0,
                          "b": 0
                        },
                        "extent": [
                          {
                            "x": -80,
                            "y": 128
                          },
                          {
                            "x": -36,
                            "y": 88
                          }
                        ],
                        "textString": "\"Damper position\nsupply air temperature\ncontrol loop\"",
                        "fontSize": 12,
                        "horizontalAlignment": "TextAlignment.Left"
                      },
                      {
                        "lineColor": {
                          "r": 0,
                          "g": 0,
                          "b": 0
                        },
                        "extent": [
                          {
                            "x": -20,
                            "y": 128
                          },
                          {
                            "x": 24,
                            "y": 88
                          }
                        ],
                        "textString": "\"Damper position\nassignments\"",
                        "fontSize": 12,
                        "horizontalAlignment": "TextAlignment.Left"
                      },
                      {
                        "lineColor": {
                          "r": 0,
                          "g": 0,
                          "b": 0
                        },
                        "extent": [
                          {
                            "x": 58,
                            "y": 124
                          },
                          {
                            "x": 102,
                            "y": 84
                          }
                        ],
                        "textString": "\"Overwrite if the freeze protection\nthat tracks TFre at the measured\nmixed air temperature limits the\ndamper position\"",
                        "fontSize": 12,
                        "horizontalAlignment": "TextAlignment.Left"
                      }
                    ]
                  }
                },
                "icon": {
                  "graphics": {
                    "line": [
                      {
                        "points": [
                          {
                            "x": 20,
                            "y": 58
                          }
                        ],
                        "color": {
                          "r": 28,
                          "g": 108,
                          "b": 200
                        }
                      },
                      {
                        "points": [
                          {
                            "x": -92,
                            "y": -84
                          },
                          {
                            "x": -50,
                            "y": -84
                          },
                          {
                            "x": 12,
                            "y": 70
                          },
                          {
                            "x": 82,
                            "y": 70
                          }
                        ],
                        "color": {
                          "r": 0,
                          "g": 0,
                          "b": 127
                        },
                        "thickness": 0.5
                      },
                      {
                        "points": [
                          {
                            "x": -66,
                            "y": 58
                          },
                          {
                            "x": 12,
                            "y": 58
                          },
                          {
                            "x": 50,
                            "y": -76
                          },
                          {
                            "x": 100,
                            "y": -76
                          }
                        ],
                        "color": {
                          "r": 0,
                          "g": 0,
                          "b": 127
                        },
                        "pattern": "LinePattern.Dash",
                        "thickness": 0.5
                      }
                    ],
                    "rectangle": [
                      {
                        "lineColor": {
                          "r": 0,
                          "g": 0,
                          "b": 127
                        },
                        "fillColor": {
                          "r": 255,
                          "g": 255,
                          "b": 255
                        },
                        "fillPattern": "FillPattern.Solid",
                        "extent": [
                          {
                            "x": -100,
                            "y": -100
                          },
                          {
                            "x": 100,
                            "y": 100
                          }
                        ]
                      }
                    ],
                    "text": [
                      {
                        "lineColor": {
                          "r": 0,
                          "g": 0,
                          "b": 127
                        },
                        "extent": [
                          {
                            "x": -108,
                            "y": 138
                          },
                          {
                            "x": 102,
                            "y": 110
                          }
                        ],
                        "textString": "\"%name\""
                      }
                    ]
                  }
                },
                "documentation": {
                  "info": "\"<html>\n<p>\nThis is a multi zone VAV AHU economizer modulation block. It calculates\nthe outdoor and return air damper positions based on the supply air temperature\ncontrol loop signal. The implementation is in line with ASHRAE\nGuidline 36 (G36), PART5.N.2.c. Damper positions are linearly mapped to\nthe supply air control loop signal. This is a final sequence in the\ncomposite multi zone VAV AHU economizer control sequence. Damper position\nlimits, which are the inputs to the sequence, are the outputs of\n<a href=\\\"modelica://Buildings.Controls.OBC.ASHRAE.G36_PR1.AHUs.MultiZone.VAV.Economizers.Subsequences.Limits\\\">\nBuildings.Controls.OBC.ASHRAE.G36_PR1.AHUs.MultiZone.VAV.Economizers.Subsequences.Limits</a> and\n<a href=\\\"modelica://Buildings.Controls.OBC.ASHRAE.G36_PR1.AHUs.MultiZone.VAV.Economizers.Subsequences.Enable\\\">\nBuildings.Controls.OBC.ASHRAE.G36_PR1.AHUs.MultiZone.VAV.Economizers.Subsequences.Enable</a>\nsequences.\n</p>\n<p>\nWhen the economizer is enabled, the PI controller modulates the damper\npositions. Return and outdoor damper are not interlocked. When the economizer is disabled,\nthe damper positions are set to the minimum outdoor air damper position limits.\n</p>\n<p>\nThe time rate of change of the damper signals is limited by a first order hold,\nusing the sample time <code>samplePeriod</code>.\nThis prevents a quick opening of the outdoor air damper, for example when the\noutdoor airflow setpoint has a step change.\nSlowing down the opening of the outdoor air damper allows the freeze protection\nto componensate with its dynamics that is faster than the opening of the outdoor air damper.\nTo avoid that all dampers are closed, the return air damper has the same\ntime rate of change limitation.\n</p>\n<p>\nThe control charts below show the input-output structure and an economizer damper\nmodulation sequence assuming a well configured controller. Control diagram:\n</p>\n<p align=\\\"center\\\">\n<img alt=\\\"Image of the multi zone AHU modulation sequence control diagram\\\"\nsrc=\\\"modelica://Buildings/Resources/Images/Controls/OBC/ASHRAE/G36_PR1/AHUs/MultiZone/EconModulationControlDiagram.png\\\"/>\n</p>\n<p>\nMulti zone AHU economizer modulation control chart:\n<br/>\n</p>\n<p align=\\\"center\\\">\n<img alt=\\\"Image of the multi zone AHU modulation sequence expected performance\\\"\nsrc=\\\"modelica://Buildings/Resources/Images/Controls/OBC/ASHRAE/G36_PR1/AHUs/MultiZone/EconModulationControlChart.png\\\"/>\n</p>\n</html>\"",
                  "revisions": "\"<html>\n<ul>\n<li>\nOctober 13, 2017, by Michael Wetter:<br/>\nCorrected implementation for when dampers are\nsuch positioned that they prevent the mixed air temperature from being\nbelow the freezing set point.\n</li>\n<li>\nOctober 11, 2017, by Michael Wetter:<br/>\nCorrected implementation to use control loop signal as input.\n</li>\n<li>\nSeptember 29, 2017, by Michael Wetter:<br/>\nCorrected implementation by adding reverse action.\n</li>\n<li>\nJune 28, 2017, by Milica Grahovac:<br/>\nFirst implementation.\n</li>\n</ul>\n</html>\""
                }
              }
            }
          }
        }
      }
    ],
    "modelicaFile": "./Modulation.mo"
  }
]